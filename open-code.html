<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Statement on Tools - 3&nbsp; Open code in the NHS</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./statement-on-using-tools-r.html" rel="next">
<link href="./purpose.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./open-code.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Open code in the NHS</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Statement on Tools</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/nhs-r-community/statements-on-tools" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./purpose.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Purpose</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./open-code.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Open code in the NHS</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./statement-on-using-tools-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Statement on using tools - R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./statement-on-using-tools-python.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Statement on using tools - Python</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./statement-on-using-tools-git.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Statement on using tools - Git and GitHub</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./statement-on-using-tools-shiny.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Statement on using tools - Shiny</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nhsr-vision.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">NHS-R vision</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./technical-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Technical guidance - R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./technical-python.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Technical guidance - Python</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./contribution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Contributing to GitHub repositories</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./glossary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">Glossary</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">3.1</span> Introduction</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">3.2</span> References</a>
  <ul class="collapse">
  <li><a href="#from-organisationsteams-that-no-longer-operate" id="toc-from-organisationsteams-that-no-longer-operate" class="nav-link" data-scroll-target="#from-organisationsteams-that-no-longer-operate"><span class="header-section-number">3.2.1</span> From organisations/teams that no longer operate</a></li>
  </ul></li>
  <li><a href="#specific-challenges" id="toc-specific-challenges" class="nav-link" data-scroll-target="#specific-challenges"><span class="header-section-number">3.3</span> Specific challenges</a>
  <ul class="collapse">
  <li><a href="#opening-code-without-exposing-datasecrets" id="toc-opening-code-without-exposing-datasecrets" class="nav-link" data-scroll-target="#opening-code-without-exposing-datasecrets"><span class="header-section-number">3.3.1</span> Opening code without exposing data/‘secrets’</a></li>
  <li><a href="#opening-code-without-giving-away-commercialbusinessclinical-proprietary-information-and-intellectual-property" id="toc-opening-code-without-giving-away-commercialbusinessclinical-proprietary-information-and-intellectual-property" class="nav-link" data-scroll-target="#opening-code-without-giving-away-commercialbusinessclinical-proprietary-information-and-intellectual-property"><span class="header-section-number">3.3.2</span> Opening code without giving away commercial/business/clinical proprietary information (and Intellectual Property)</a></li>
  <li><a href="#concerns-over-code-being-sold-back-to-the-nhs-at-a-profit" id="toc-concerns-over-code-being-sold-back-to-the-nhs-at-a-profit" class="nav-link" data-scroll-target="#concerns-over-code-being-sold-back-to-the-nhs-at-a-profit"><span class="header-section-number">3.3.3</span> Concerns over code being “sold” back to the NHS at a profit</a></li>
  <li><a href="#coding-in-the-open" id="toc-coding-in-the-open" class="nav-link" data-scroll-target="#coding-in-the-open"><span class="header-section-number">3.3.4</span> Coding in the open</a></li>
  </ul></li>
  <li><a href="#licenceslicenses" id="toc-licenceslicenses" class="nav-link" data-scroll-target="#licenceslicenses"><span class="header-section-number">3.4</span> Licences/Licenses</a>
  <ul class="collapse">
  <li><a href="#language" id="toc-language" class="nav-link" data-scroll-target="#language"><span class="header-section-number">3.4.1</span> Language</a></li>
  <li><a href="#how-to-use-licences" id="toc-how-to-use-licences" class="nav-link" data-scroll-target="#how-to-use-licences"><span class="header-section-number">3.4.2</span> How to use licences</a></li>
  <li><a href="#nhs-r-community-use-of-licences" id="toc-nhs-r-community-use-of-licences" class="nav-link" data-scroll-target="#nhs-r-community-use-of-licences"><span class="header-section-number">3.4.3</span> NHS-R Community use of licences</a></li>
  <li><a href="#setting-up-licenses" id="toc-setting-up-licenses" class="nav-link" data-scroll-target="#setting-up-licenses"><span class="header-section-number">3.4.4</span> Setting up licenses</a></li>
  </ul></li>
  <li><a href="#useful-blogs" id="toc-useful-blogs" class="nav-link" data-scroll-target="#useful-blogs"><span class="header-section-number">3.5</span> Useful blogs</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/nhs-r-community/statements-on-tools/edit/main/open-code.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/nhs-r-community/statements-on-tools/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Open code in the NHS</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="introduction" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">3.1</span> Introduction</h2>
<p>There are number of organisations and publications advocating open coding in its various guises within the NHS and more generally across the public sector and academia. This page is intended as a place to collate relevant literature and proposed/tried approaches to implement open code policies in the NHS, from individual teams up to entire organisations.</p>
<p>There is also a significant crossover between open code and software engineering best practice, which means that they are often promoted together as an effective means to improve reproducibility.</p>
</section>
<section id="references" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="references"><span class="header-section-number">3.2</span> References</h2>
<p>The following is a list of some of the material available discussing and supporting open coding and software engineering approaches to code development in the NHS:</p>
<ul>
<li><p><a href="https://www.gov.uk/government/publications/better-broader-safer-using-health-data-for-research-and-analysis/better-broader-safer-using-health-data-for-research-and-analysis#BBS">Better, broader, safer using health data for research and analysis</a> (also known as The Goldacre Report) - a systematic and far-reaching report, written on behalf of the Department of Health and Social Care, advocating for open coding and <a href="#RAP">Reproducible Analytical Pipelines (RAP)</a> in the NHS,</p></li>
<li><p>Government Analysis Function <a href="https://analysisfunction.civilservice.gov.uk/policy-store/reproducible-analytical-pipelines-strategy/#RAP">Reproducible Analytical Pipelines (RAP) Strategy</a> - released in June 2022 this is a comprehensive strategy for Government in summarising the finding of the RAP strategy since 2017 and the plan for future work,</p></li>
<li><p><a href="https://www.gov.uk/government/publications/data-saves-lives-reshaping-health-and-social-care-with-data/data-saves-lives-reshaping-health-and-social-care-with-data#data-saves-lives">Data saves lives: reshaping health and social care with data</a> - a broad document that covers many aspects of “improving trust in the health and care system’s use of data” which extends to how data is used and references the Better, broader, safer using health data for research and analysis <a href="#BBS">Better, broader and safer using health data for research and analysis (Goldacre)</a>,</p></li>
<li><p>Office for Statistics Regulation – <a href="https://osr.statisticsauthority.gov.uk/publication/reproducible-analytical-pipelines-overcoming-barriers-to-adoption/">Overcoming Barriers to Adoption of RAP</a> - a report written in support of RAP for adoption by all government departments doing analytics, describing the challenges and recommending solutions to address those challenges covering both organisational, team-level and individual barriers,</p></li>
<li><p><a href="https://analysisfunction.civilservice.gov.uk/policy-store/open-sourcing-analytical-code/">Open sourcing analytical code</a> - from the Analysis Function and first published in March 2023 is guidance for anyone working in government and who is involved or owns analysis pipelines,</p></li>
<li><p><a href="https://best-practice-and-impact.github.io/qa-of-code-guidance/intro.html#duck">Quality assurance of code for analysis and research</a> - also known as the Duck Book is a living document for Analysis Standards and Pipelines for the Office of National Statistics,</p></li>
<li><p>NHS England <a href="https://www.england.nhs.uk/digitaltechnology/open-source/">Open Source Programme</a> - can be found in the Digital Transformation pages,</p></li>
<li><p><a href="https://government.github.com/community/">Government GitHub Community</a> - links to UK Central and Council GitHub repositories amongst many others across the world,</p></li>
<li><p><a href="https://nhsengland.github.io/nhs-r-reporting/#nhse_report">NHS England R Reporting</a> - includes tutorials and example A&amp;E Attendance Report,</p></li>
</ul>
<section id="from-organisationsteams-that-no-longer-operate" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="from-organisationsteams-that-no-longer-operate"><span class="header-section-number">3.2.1</span> From organisations/teams that no longer operate</h3>
<ul>
<li><p>NHSx (now NHS England) <a href="https://github.com/nhsx/open-source-policy/blob/main/open-source-policy.md#nhsx_osp">Open Source Policy</a> - a comprehensive description of why and how open source should be implemented in the NHS, including statements about best practice and a check list for open sourcing code. An <a href="https://github.com/nhsx/open-source-policy/issues/22">issue</a> was opened in Nov 2022 about rebranding to NHS England from NHSx,</p></li>
<li><p>NHS Digital (now NHS England) <a href="https://nhsdigital.github.io/rap-community-of-practice/">RAP Community of Practice</a> - a wealth of material pertaining to setting up and running RAP. The team also write <a href="https://digital.nhs.uk/blog/data-points-blog">blogs</a>,</p></li>
<li><p><a href="https://www.gov.uk/service-manual/technology/making-source-code-open-and-reusable#gds-open">Making source code open and reusable</a> - from the Gov.uk Service Manual for the Government Digital Service,</p></li>
<li><p><a href="https://cdu-data-science-team.github.io/team-blog/index.html#cdu">CDU Data Science Blog</a> - the Clinical Development Unit was a team in Nottinghamshire Healthcare NHS Foundation Trust that coded openly and wrote about some of their approaches on a {distill} blog site. This also features in the <a href="https://transform.england.nhs.uk/key-tools-and-info/digital-playbooks/open-source-digital-playbook/i-want-to-create-a-project-that-can-be-used-by-other-healthcare-organisations/">NHS England playbook</a> which is a series of case examples, and which was itself referred to in the <a href="#data-saves-lives">Data Saves Lives</a> document:</p></li>
</ul>
<blockquote class="blockquote">
<p>Our commitments We will publish a digital playbook on how to open source your code for health and care organisations. Guidance on where to put the code, how to license and maintain it, and best practice for working with suppliers will be published in addition to case studies of teams who have done this – completed May 2022.</p>
</blockquote>
</section>
</section>
<section id="specific-challenges" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="specific-challenges"><span class="header-section-number">3.3</span> Specific challenges</h2>
<section id="opening-code-without-exposing-datasecrets" class="level3" data-number="3.3.1">
<h3 data-number="3.3.1" class="anchored" data-anchor-id="opening-code-without-exposing-datasecrets"><span class="header-section-number">3.3.1</span> Opening code without exposing data/‘secrets’</h3>
<p>In coding terms exposing <a href="https://docs.github.com/en/actions/security-guides/encrypted-secrets#about-encrypted-secrets">secrets</a> often mean sharing passwords or keys but for the data analysis that occurs in the NHS and other public sector organisations, this will also mean the sharing of personal, clinical or other sensitive data. In practice there are a number of approaches to avoiding this happening, see the specific NHS approaches:</p>
<ul>
<li><a href="#nhsx_osp">NHSx Open Source Policy</a> (note NHSx is now NHS England but this hasn’t been adopted as an NHS England Policy),</li>
<li><a href="#nhse_report">NHS England’s R Reporting</a>) and</li>
<li>CDU Data Science Team <a href="https://cdu-data-science-team.github.io/team-blog/index.html#category:GitHub">blogs about GitHub</a></li>
<li><a href="#gds-open">Making source code open and reusable</a> (provides broad requirements like storing secret keys and credentials separately)</li>
<li><a href="https://github.com/ncl-icb-analytics">NHS North Central London ICB Analytics Team</a> - use a <a href="https://github.com/ncl-icb-analytics/ncl_project">template repository</a> for new analytical projects and further information is detailed in the slides for <a href="https://ncl-icb-analytics.github.io/intro_to_git/intro_slides.html#26">Intro to Git</a></li>
</ul>
<p>and these include setting up repositories so there are automated restrictions to prevent and reduce the risk of unintentional disclosure of any sensitive data.</p>
<p>Nevertheless, we do have to rely upon people using these recommendations and setting up their systems which is very similar to our use of email or social media accounts. As an example, with email we need to rely upon senders using the blind copy in email if the recipients include patients or the public as there is no automated way to prevent a breach of emails otherwise. Consequently, mistakes have and do happen and there are mechanisms which are in place to <a href="https://transform.england.nhs.uk/information-governance/guidance/personal-data-breaches/">report these breaches</a> and does not mean that we prevent people from using email or social media. Systems like GitHub do offer the possibility to set up processes to prevent, reverse and delete accidental sharing (breaches) but are still subject to reporting for near misses and incidents when these occur. However, it may be that these are only reported locally and do not, currently, get shared more widely.</p>
</section>
<section id="opening-code-without-giving-away-commercialbusinessclinical-proprietary-information-and-intellectual-property" class="level3" data-number="3.3.2">
<h3 data-number="3.3.2" class="anchored" data-anchor-id="opening-code-without-giving-away-commercialbusinessclinical-proprietary-information-and-intellectual-property"><span class="header-section-number">3.3.2</span> Opening code without giving away commercial/business/clinical proprietary information (and Intellectual Property)</h3>
<p>The issue of intellectual property is a very difficult one to argue against, particularly when analysts and data scientists are not necessarily trained or familiar in this area of law. However, it is often used as a reason why not to share specific code, like SQL, but without any formal detail as to how this will be breaking any laws. By publishing SQL code it is often assumed that the structure of the databases, which is owned by a company, could be inadvertently revealed. However, there are examples of clinical database schemas like that of <a href="https://reports.opensafely.org/reports/opensafely-tpp-database-schema/">TPP</a> who own SystmOne and which has been shared as part of the <a href="https://www.opensafely.org/">OpenSafely</a> secure analytics platform for NHS electronic health records and it could be said that discussions related to sharing code should be considered as part of the procurement process. And also Government guidance, <a href="https://www.gov.uk/government/publications/open-source-guidance/when-code-should-be-open-or-closed">When code should be open or closed</a>, from the Central Digital &amp; Data Office states:</p>
<blockquote class="blockquote">
<p>Unless your database schema contains credentials it is not sensitive and can be open. You should store any credentials separately and keep them closed.</p>
</blockquote>
</section>
<section id="concerns-over-code-being-sold-back-to-the-nhs-at-a-profit" class="level3" data-number="3.3.3">
<h3 data-number="3.3.3" class="anchored" data-anchor-id="concerns-over-code-being-sold-back-to-the-nhs-at-a-profit"><span class="header-section-number">3.3.3</span> Concerns over code being “sold” back to the NHS at a profit</h3>
<p>This is an argument that is often used and not necessarily with any examples of when this has ever occurred. Nevertheless, if it did happen we can explore that as the end result is not necessarily a reason to not share publicly.</p>
<section id="adding-value" class="level4" data-number="3.3.3.1">
<h4 data-number="3.3.3.1" class="anchored" data-anchor-id="adding-value"><span class="header-section-number">3.3.3.1</span> Adding value</h4>
<p>The courses from NHS-R Community are all open to the public and can be used by anyone to learn, teach or amend. Nevertheless, they are being used by organisations, like the Strategy Unit (part of NHS Midlands and Lancashire Commissioning Strategy Unit), who use the materials and offer training sessions at a daily rate for the workshops. This means that, although the materials are free, the services of the person running the course is being paid for and that’s an added service.</p>
<p>The same may be the case for code that is built upon, so if a model is taken and enhanced, then that’s an added service. Of course, that subsequent code may not be made available to the public, but the original will be so it’s upon the purchaser to make that judgement on whether a service that leads to closed code is a good thing to purchase and our suggestion is that it’s always considered an important part of procurement that code is made open.</p>
</section>
<section id="selling-back-the-same-code" class="level4" data-number="3.3.3.2">
<h4 data-number="3.3.3.2" class="anchored" data-anchor-id="selling-back-the-same-code"><span class="header-section-number">3.3.3.2</span> Selling back the same code</h4>
<p>Taking the idea of adding value further, what if a company got hold of freely shared code and sold it back to the NHS? Under these circumstances that is unfortunate but the mistake that is made here is on not looking for the code in the open in the first place and that could be related to the level of knowledge of the staff on open code. A better remedy would be promoting the use of open code and supporting staff in this professional field to use and contribute to open code areas like GitHub.</p>
</section>
<section id="taking-ideas-and-selling-them-back" class="level4" data-number="3.3.3.3">
<h4 data-number="3.3.3.3" class="anchored" data-anchor-id="taking-ideas-and-selling-them-back"><span class="header-section-number">3.3.3.3</span> Taking ideas and selling them back</h4>
<p>If there were a situation where something is written, for example, a proposal which is taken up by a consultancy and sold back verbatim, this is again unfortunate as there is an unnecessary cost to public funds. However, there is a point that the sharing was beneficial because the idea was worthwhile. Many consultancies already work on the basis of talking to staff when given a project and gaining information from people at all levels, something that may not have happened internally. Ideas from people “doing the work” do not always go as high as the board but can get there more easily when filtered through management consultancies.</p>
<p>If we are concerned about being sold our own work then, by putting it out in the open, we are also allowing discovery of it by everyone.</p>
</section>
</section>
<section id="coding-in-the-open" class="level3" data-number="3.3.4">
<h3 data-number="3.3.4" class="anchored" data-anchor-id="coding-in-the-open"><span class="header-section-number">3.3.4</span> Coding in the open</h3>
<p>There is, currently, no one policy or procedure that can be referred to in terms of coding in the open. Whilst it has been recommended strongly in many of the important reviews available to the NHS like <a href="#data-saves-lives">Data Saves Lives</a> and <a href="#BBS">Better, broader and safer using health data for research and analysis (Goldacre)</a> there continues to be little guidance on what this looks like in day to day work. Some teams have published in the open, like the <a href="#cdu">CDU Data Science Team</a> and features as a case study example, however, the team has changed in approach and name as of 2023 and the blog site is no longer being updated. The <a href="#nhsx_osp">NHSx Open Source policy</a> recommended that all development/analytics work done in the NHS be coded in the open unless there is good reason not to. However, NHSx moved into NHS England in 2022 and the GitHub repository (where this is published) and continues to state:</p>
<blockquote class="blockquote">
<p>Current status: Version 1.0 - This policy is currently going through internal review as part of the adoption process.</p>
</blockquote>
<p>It is worth noting, in terms of open coding, this document also says:</p>
<blockquote class="blockquote">
<p>An internal code review should be conducted for all open source projects and specific responsibilities must be met within or close to the development team.</p>
</blockquote>
<p>Reviews could be deemed to slow the process of sharing code openly and so needs to be considered within the context of software code maintenance which is a subject in itself. Books on <a href="https://code-review.tidyverse.org/reviewer/purpose.html">code review principles</a> from the Tidyteam at Posit can be a really good place to start.</p>
<p>The <a href="#gds-open">Making source code open and reusable</a> suggests making your code open from the start and gives a short check list on what to consider when making existing code open.</p>
</section>
</section>
<section id="licenceslicenses" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="licenceslicenses"><span class="header-section-number">3.4</span> Licences/Licenses</h2>
<section id="language" class="level3" data-number="3.4.1">
<h3 data-number="3.4.1" class="anchored" data-anchor-id="language"><span class="header-section-number">3.4.1</span> Language</h3>
<p>To clarify on spelling: <a href="https://www.grammarly.com/blog/licence-license/">license</a> is both a noun and a verb in US English, but in UK English licence may be used for a noun and license as a verb. This becomes important for searches, which is why the header title here has both spelling - just in case.</p>
<p>The <a href="https://gds-way.cloudapps.digital/manuals/licensing.html#language">GDS Way</a> says:</p>
<blockquote class="blockquote">
<p>When using a proper name, use the appropriate spelling for that thing (e.g.&nbsp;the MIT License.)</p>
</blockquote>
<p>but also:</p>
<blockquote class="blockquote">
<p>Each repository should include a licence file. This should be called LICENCE or LICENCE.md.</p>
</blockquote>
</section>
<section id="how-to-use-licences" class="level3" data-number="3.4.2">
<h3 data-number="3.4.2" class="anchored" data-anchor-id="how-to-use-licences"><span class="header-section-number">3.4.2</span> How to use licences</h3>
<p>Although documents like <a href="#data-saves-lives">Data Saves Lives</a> states there was an intention to:</p>
<blockquote class="blockquote">
<p>publish a digital playbook on how to open source your code for health and care organisations. Guidance on where to put the code, how to license and maintain it, and best practice for working with suppliers will be published in addition to case studies of teams who have done this – completed May 2022.</p>
</blockquote>
<p>this hasn’t led to any particular document to explain when or how to use licences. The reference to a digital play book where the requirement is to:</p>
<blockquote class="blockquote">
<p>create a project that can be used by other healthcare organisations</p>
</blockquote>
<p>links to case study <a href="https://transform.england.nhs.uk/key-tools-and-info/digital-playbooks/open-source-digital-playbook/i-want-to-create-a-project-that-can-be-used-by-other-healthcare-organisations/">scenarios</a> which may have information, but which will require reading through to check and reference. One site that is listed is the <a href="#cdu">CDU Data Science Team</a> and whilst this team used licences there was never any explicit mention on how or when to use them.</p>
<p>Government documents like the <a href="#duck">Duck book</a> do have sections on <a href="https://best-practice-and-impact.github.io/qa-of-code-guidance/project_documentation.html?highlight=licen#copyright-and-licenses">copyright and licenses</a> and their recommendations, along with the <a href="https://analysisfunction.civilservice.gov.uk/policy-store/open-sourcing-analytical-code/">Analysis Function</a>, are to use <a href="https://opensource.org/license/mit/">MIT</a> and <a href="http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/">OGL</a>.</p>
<p>The <a href="#gds-open">Making source code open and reusable</a> <a href="https://www.gov.uk/service-manual/technology/making-source-code-open-and-reusable#licensing-your-code">states</a>:</p>
<blockquote class="blockquote">
<p>You should publish your code under an <a href="https://opensource.org/licenses">Open Source Initiative compatible licence</a>. For example, GDS uses the <a href="https://gds-way.cloudapps.digital/manuals/licensing.html">MIT licence</a>.</p>
</blockquote>
<blockquote class="blockquote">
<p>All code produced by civil servants is automatically covered by <a href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/">Crown Copyright</a>.</p>
</blockquote>
<p>However, many people who are part of the NHS-R Community are not considered <a href="https://www.instituteforgovernment.org.uk/explainer/civil-service-staff-numbers#:~:text=In%20this%20way%2C%20civil%20servants,not%20counted%20as%20civil%20servants.">civil servants</a>:</p>
<blockquote class="blockquote">
<p>… civil servants are defined much more narrowly than public sector workers: police, teachers, NHS staff, members of the armed forces and local government officers are not counted as civil servants.</p>
</blockquote>
<p>Even where a person’s work is covered by being a civil servant, it is still really good practice to include the corresponding licence to any published work as it cannot be assumed that people know the work is covered by the licence or that the person was a civil servant.</p>
<p>Also, whilst some organisations in the NHS are considered Crown bodies like the Department of Health:</p>
<blockquote class="blockquote">
<p>Subsection (7) provides that, like NHS trusts, NHS foundation trusts are not Crown bodies: see paragraph 18 of Schedule 2 to the National Health Service and Community Care Act 1990 (“the 1990 Act”).</p>
</blockquote>
<p><a href="https://www.legislation.gov.uk/ukpga/2003/43/notes/division/5/1?view=plain#:~:text=Subsection%20(7)%20provides%20that%2C,%E2%80%9Cthe%201990%20Act%E2%80%9D">Health and Social Care (Community Health and Standards) Act 2003 Explanatory Notes</a>.)</p>
</section>
<section id="nhs-r-community-use-of-licences" class="level3" data-number="3.4.3">
<h3 data-number="3.4.3" class="anchored" data-anchor-id="nhs-r-community-use-of-licences"><span class="header-section-number">3.4.3</span> NHS-R Community use of licences</h3>
<p>The use of licences by NHS-R Community for the GitHub repositories will be detailed in the NHSR-Way book under <a href="https://nhsrway.nhsrcommunity.com/style-guides.html#licenceslicenses">Style Guide for code</a>.</p>
</section>
<section id="setting-up-licenses" class="level3" data-number="3.4.4">
<h3 data-number="3.4.4" class="anchored" data-anchor-id="setting-up-licenses"><span class="header-section-number">3.4.4</span> Setting up licenses</h3>
<p>There are two ways to starting a repository for sharing on GitHub. Firstly, there is creating a repository directly on the <a href="https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/licensing-a-repository">GitHub website</a> and you can select the appropriate licence as you do that.</p>
<p>If, however, you create the project locally, using R for example, you can add a licence to it using a package called {usethis} and typing in the R console:</p>
<pre><code>usethis::use_cc0_license()
usethis::use_mit_license()</code></pre>
<p>OGL though does not appear in the selections for {usethis} or GitHub. Crown Copyright sometimes appears as a separate licence as in the <a href="https://github.com/co-analysis/a11ytables">{a11ytables}</a> and sometimes combined as in <a href="https://github.com/alphagov/pay-adminusers/blob/master/LICENCE">pay-aminusers</a>, an example referred to in the <a href="https://gds-way.cloudapps.digital/manuals/licensing.html#example">GDS Way</a>.</p>
<p>Dual licences, like MIT and CC0 are not so commonly combined and there is more information on the <a href="https://adr.github.io/madr/decisions/0001-use-CC0-or-MIT-as-license.html">GitHub</a> site about dual licensing.</p>
</section>
</section>
<section id="useful-blogs" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="useful-blogs"><span class="header-section-number">3.5</span> Useful blogs</h2>
<p><a href="https://gds.blog.gov.uk/2017/09/04/the-benefits-of-coding-in-the-open/">GDS The benefits of coding in the open</a><br>
<a href="https://technology.blog.gov.uk/2017/09/27/dont-be-afraid-to-code-in-the-open-heres-how-to-do-it-securely/">GOV.uk Don’t be afraid to codein the open: here’s how to do it securely</a></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./purpose.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Purpose</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./statement-on-using-tools-r.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Statement on using tools - R</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <div class="footer-contents">Statement on Tools by the NHS-R Community
NHS-R Community makes all of their materials publicly available under open source licenses
</div>  
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">This book was built with <a href="https://quarto.org/">Quarto</a>.</div>
  </div>
</footer>



</body></html>